<div class="d-none d-print-block report-header-print">
    <div class="report-info-left">
        <h2>Reporte de Atenciones</h2>
        <p>Hotel Garoé • Recepción</p>
    </div>
    <div class="report-info-right">
        <div><strong>Fecha:</strong> <span id="print-date-atenciones"></span></div>
        <div><strong>Generado por:</strong> <span id="print-repc-nombre-atenciones"></span></div>
        <div class="text-muted" style="font-size: 7pt; margin-top: 5px;">Documento Interno de Uso Operativo</div>
    </div>
</div>

<div class="module-toolbar no-print">
    <div class="btn-group" role="group">
        <button type="button" class="btn btn-outline-primary active" id="btnVistaTrabajo">
            <i class="bi bi-pencil-square me-2"></i>Vista de Trabajo
        </button>
        <button type="button" class="btn btn-outline-primary" id="btnVistaRack">
            <i class="bi bi-grid-3x3-gap me-2"></i>Vista de Rack
        </button>
    </div>

    <div class="btn-print-wrapper">
        <!-- Selector eliminado: Se usa usuario global -->
        <button class="btn btn-primary btn-sm fw-bold" onclick="imprimirAtenciones()">
            <i class="bi bi-printer me-2"></i>Imprimir Listado
        </button>
    </div>
</div>

<div id="atenciones-trabajo">
    <div class="card mb-4 shadow-sm border-0 no-print">
        <div class="card-header py-3">
            <h6 class="mb-0 fw-bold"><i class="bi bi-gift me-2"></i>Añadir / Editar Atención</h6>
        </div>
        <div class="card-body">
            <form id="formNuevaAtencion" class="row g-3 align-items-end">
                <div class="col-md-3">
                    <label class="form-label small fw-bold">Habitación</label>
                    <input type="text" id="atencion_hab" class="form-control" placeholder="Ej: 101" required
                        list="lista-habs-atenciones">
                    <datalist id="lista-habs-atenciones"></datalist>
                </div>
                <div class="col-md-9">
                    <label class="form-label small fw-bold">Tipos de Atención</label>
                    <div class="d-flex flex-wrap gap-2 p-2 border rounded bg-light"
                        style="max-height: 120px; overflow-y: auto;">
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Fruta" id="at_fruta"><label class="form-check-label small" for="at_fruta"><i
                                    class="bi bi-apple me-1"></i>Fruta</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Fruta Especial" id="at_fruta_esp"><label class="form-check-label small"
                                for="at_fruta_esp"><i class="bi bi-basket2 me-1"></i>Fruta Esp.</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Cava" id="at_cava"><label class="form-check-label small" for="at_cava"><i
                                    class="bi bi-cup-straw me-1"></i>Cava</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Flores" id="at_flores"><label class="form-check-label small" for="at_flores"><i
                                    class="bi bi-flower1 me-1"></i>Flores</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Agua" id="at_agua"><label class="form-check-label small" for="at_agua"><i
                                    class="bi bi-droplet me-1"></i>Agua</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Mojo" id="at_mojo"><label class="form-check-label small" for="at_mojo"><i
                                    class="bi bi-bowl me-1"></i>Mojo</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Tetera" id="at_tetera"><label class="form-check-label small" for="at_tetera"><i
                                    class="bi bi-cup-hot me-1"></i>Tetera</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Carta" id="at_carta"><label class="form-check-label small" for="at_carta"><i
                                    class="bi bi-envelope me-1"></i>Carta</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="SPA" id="at_spa"><label class="form-check-label small" for="at_spa"><i
                                    class="bi bi-water me-1"></i>SPA</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Minibar Bienvenida" id="at_minibar"><label class="form-check-label small"
                                for="at_minibar"><i class="bi bi-snow me-1"></i>Minibar</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Regalo" id="at_regalo"><label class="form-check-label small" for="at_regalo"><i
                                    class="bi bi-gift me-1"></i>Regalo</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="1/2 Vino" id="at_vino"><label class="form-check-label small" for="at_vino"><i
                                    class="bi bi-glass-pink me-1"></i>1/2 Vino</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Tarta" id="at_tarta"><label class="form-check-label small" for="at_tarta"><i
                                    class="bi bi-cake2 me-1"></i>Tarta</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Tarjeta" id="at_tarjeta"><label class="form-check-label small"
                                for="at_tarjeta"><i class="bi bi-card-text me-1"></i>Tarjeta</label></div>
                        <div class="form-check me-2"><input class="form-check-input check-atencion" type="checkbox"
                                value="Regalo Niños" id="at_ninos"><label class="form-check-label small"
                                for="at_ninos"><i class="bi bi-robot me-1"></i>Regalo Niños</label></div>
                    </div>
                </div>
                <div class="col-md-9">
                    <label class="form-label small fw-bold">Comentario / Observaciones</label>
                    <textarea id="atencion_comentario" class="form-control" rows="2"
                        placeholder="Ej: Poner en la mesa, cliente alérgico..."></textarea>
                </div>
                <div class="col-md-3 d-flex gap-2">
                    <button type="submit" class="btn btn-primary w-75 fw-bold py-2">Actualizar</button>
                    <button type="button" class="btn btn-outline-danger w-25" id="btnResetAtenciones"
                        title="Borrar todo el listado">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
    <div class="card shadow-sm border-0">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0 table-atenciones-print">
                <thead class="table-light">
                    <tr>
                        <th style="width: 15%;">Habitación</th>
                        <th style="width: 40%;">Atenciones</th>
                        <th style="width: 30%;">Comentario</th>
                        <th style="width: 20%;" class="text-end">Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaAtencionesActivas"></tbody>
            </table>
        </div>
    </div>
</div>

<!-- Sección de Firmas -->
<div class="d-none d-print-block mt-5">
    <div class="row g-5">
        <div class="col-6">
            <div class="mb-4">
                <small class="text-muted d-block mb-1">Nombre Recepcionista:</small>
                <div class="fw-bold border-bottom border-dark pb-1" id="print-repc-nombre-atenciones"
                    style="min-height: 20px;"></div>
            </div>
            <div class="text-center pt-3" style="border-top: 1px dashed #ccc;"><small class="fw-bold">Firma
                    Recepcionista</small></div>
        </div>
        <div class="col-6">
            <div class="mb-4">
                <small class="text-muted d-block mb-1">Nombre Pisos/Gobernanta:</small>
                <div class="border-bottom border-dark pb-1" style="min-height: 20px;">&nbsp;</div>
            </div>
            <div class="text-center pt-3" style="border-top: 1px dashed #ccc;"><small class="fw-bold">Firma
                    Pisos</small></div>
        </div>
    </div>
</div>

<div id="atenciones-rack" class="d-none">
    <div id="atenciones-stats" class="row g-2 mb-4"></div>
    <div class="card shadow-sm border-0">
        <div class="card-body">
            <div id="rack-habitaciones" class="d-flex flex-wrap gap-1 justify-content-start"></div>
        </div>
    </div>
</div>